{"version":3,"file":"my.js","sources":["pages-my/my/my.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMtbXlcbXlcbXkudnVl"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <view class=\"avatar-section\" @click=\"chooseAvatar\">\n      <image :src=\"form.avatar || '/static/default-avatar.png'\" mode=\"aspectFill\" class=\"avatar\" />\n      <text class=\"tip\">点击更换头像</text>\n    </view>\n\n    <view class=\"form-list\">\n      <view class=\"form-item\">\n        <text class=\"label\">用户名</text>\n        <input class=\"input\" v-model=\"form.username\" placeholder=\"请输入用户名\" />\n      </view>\n      \n      <view class=\"form-item\">\n        <text class=\"label\">性别</text>\n        <picker mode=\"selector\" :range=\"['保密', '男', '女']\" @change=\"handleGenderChange\">\n          <view class=\"picker-value\">{{ ['保密', '男', '女'][form.gender] }} ></view>\n        </picker>\n      </view>\n\n      <view class=\"form-item\">\n        <text class=\"label\">年龄</text>\n        <input class=\"input\" type=\"number\" v-model=\"form.age\" placeholder=\"请输入年龄\" />\n      </view>\n\n      <view class=\"form-item\">\n        <text class=\"label\">手机号</text>\n        <input class=\"input\" type=\"number\" v-model=\"form.phone\" placeholder=\"请输入手机号\" />\n      </view>\n    </view>\n\n    <button class=\"save-btn\" @click=\"saveProfile\">保存修改</button>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport { useUserStore } from '@/stores/useUserStore.js';\n\nconst userStore = useUserStore();\nconst form = ref({});\n\n// 进入页面时，复制 Store 里的数据到表单\nonMounted(() => {\n  // 深拷贝，防止修改表单时直接变动 Store（虽然 Pinia 允许，但为了点保存再生效，最好拷贝）\n  form.value = JSON.parse(JSON.stringify(userStore.userInfo));\n});\n\nconst chooseAvatar = () => {\n  uni.chooseImage({\n    count: 1,\n    success: (res) => {\n      // 实际开发中这里应该上传到服务器获取 URL\n      // 这里演示直接使用临时路径\n      form.value.avatar = res.tempFilePaths[0];\n    }\n  });\n};\n\nconst handleGenderChange = (e) => {\n  form.value.gender = e.detail.value;\n};\n\nconst saveProfile = () => {\n  if (!form.value.username) return uni.showToast({ title: '用户名不能为空', icon: 'none' });\n  \n  // 更新 Store\n  userStore.updateUserInfo(form.value);\n  \n  uni.showToast({ title: '保存成功', icon: 'success' });\n  setTimeout(() => {\n    uni.navigateBack(); // 返回上一页\n  }, 1000);\n};\n</script>\n\n<style scoped>\n.container {\r\n\tpadding: 30rpx; \r\n\tbackground: #f5f5f5; \r\n\tmin-height: 100vh;\r\n\t }\n.avatar-section {\r\n\tdisplay: flex; \r\n\tflex-direction: column;\r\n\t align-items: center;\r\n\t  margin: 40rpx 0;\r\n\t   }\n.avatar { \r\n\twidth: 160rpx;\r\n\theight: 160rpx;\r\n\tborder-radius: 50%;\r\n\tbackground: #fff; \r\n   }\n.tip { \r\n\tfont-size: 24rpx; \r\n\tcolor: #999; \r\n\tmargin-top: 10rpx;\r\n\t }\n\n.form-list { \r\n\tbackground: #fff; \r\n\tborder-radius: 12rpx; \r\n\tpadding: 0 30rpx;\r\n\t margin-bottom: 60rpx;\r\n\t  }\n.form-item { display: flex; \r\n\tjustify-content: space-between; \r\n\talign-items: center;\r\n\theight: 100rpx;\r\n\tborder-bottom: 1px solid #eee; \r\n  }\n.form-item:last-child { \r\n\tborder-bottom: none; \r\n\t}\n.label { font-size: 30rpx; color: #333; }\n.input { text-align: right; font-size: 30rpx; color: #333; }\n.picker-value { font-size: 30rpx; color: #666; }\n.save-btn { background: #007aff; color: #fff; border-radius: 50rpx; }\n</style>","import MiniProgramPage from 'C:/Users/ffx/OneDrive/Desktop/项目源码/xuedong-uniapp/pages-my/my/my.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserStore","ref","onMounted","uni"],"mappings":";;;;;;AAuCA,UAAM,YAAYA,oBAAY,aAAA;AAC9B,UAAM,OAAOC,cAAAA,IAAI,CAAA,CAAE;AAGnBC,kBAAAA,UAAU,MAAM;AAEd,WAAK,QAAQ,KAAK,MAAM,KAAK,UAAU,UAAU,QAAQ,CAAC;AAAA,IAC5D,CAAC;AAED,UAAM,eAAe,MAAM;AACzBC,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,QACP,SAAS,CAAC,QAAQ;AAGhB,eAAK,MAAM,SAAS,IAAI,cAAc,CAAC;AAAA,QACxC;AAAA,MACL,CAAG;AAAA,IACH;AAEA,UAAM,qBAAqB,CAAC,MAAM;AAChC,WAAK,MAAM,SAAS,EAAE,OAAO;AAAA,IAC/B;AAEA,UAAM,cAAc,MAAM;AACxB,UAAI,CAAC,KAAK,MAAM;AAAU,eAAOA,cAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,OAAQ,CAAA;AAGjF,gBAAU,eAAe,KAAK,KAAK;AAEnCA,oBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAS,CAAE;AAChD,iBAAW,MAAM;AACfA,sBAAG,MAAC,aAAY;AAAA,MACjB,GAAE,GAAI;AAAA,IACT;;;;;;;;;;;;;;;;;;;;ACxEA,GAAG,WAAW,eAAe;"}