{"version":3,"file":"GlobalLayout.js","sources":["components/GlobalLayout/GlobalLayout.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvZmZ4L09uZURyaXZlL0Rlc2t0b3Av6aG555uu5rqQ56CBL3h1ZWRvbmctdW5pYXBwL2NvbXBvbmVudHMvR2xvYmFsTGF5b3V0L0dsb2JhbExheW91dC52dWU"],"sourcesContent":["//复用组件\r\n<template>\n  <view class=\"page-container\">\n    <CustomNavbar :title=\"title\" />\n\n    <view class=\"content-feed\">\n      <slot></slot> \n    </view>\n\n    <uni-drawer ref=\"leftDrawerRef\" mode=\"left\" :width=\"300\" @close=\"drawerStore.closeLeft()\">\n      <scroll-view class=\"drawer-scroll-view\" scroll-y>\n        <LeftMenu />\n      </scroll-view>\n    </uni-drawer>\n\n    <uni-drawer ref=\"rightDrawerRef\" mode=\"right\" :width=\"300\" @close=\"drawerStore.closeRight()\">\n      <scroll-view class=\"drawer-scroll-view\" scroll-y>\n        <RightProfile />\n      </scroll-view>\n    </uni-drawer>\n\n  </view>\n</template>\n\n<script setup>\nimport { ref, watch, onMounted } from 'vue';\nimport { useDrawerStore } from '@/stores/drawer.js';\n\n// 1. 定义 props，允许父组件传入 title\ndefineProps({\n  title: {\n    type: String,\n    default: ''\n  }\n});\n\nconst drawerStore = useDrawerStore();\nconst leftDrawerRef = ref(null);\nconst rightDrawerRef = ref(null);\n\n\n// 3. 监听 Pinia 状态 ➡️ 控制本地抽屉\nwatch(() => drawerStore.isLeftOpen, (newVal) => {\n  if (leftDrawerRef.value) {\n    newVal ? leftDrawerRef.value.open() : leftDrawerRef.value.close();\n  }\n});\n\nwatch(() => drawerStore.isRightOpen, (newVal) => {\n  if (rightDrawerRef.value) {\n    newVal ? rightDrawerRef.value.open() : rightDrawerRef.value.close();\n  }\n});\n// 4. 页面加载时，立即检查 Pinia 状态\nonMounted(() => {\n  if (drawerStore.isLeftOpen) {\n    leftDrawerRef.value?.open();\n  }\n  if (drawerStore.isRightOpen) {\n    rightDrawerRef.value?.open();\n  }\n});\n</script>\n\n<style lang=\"scss\" scoped>\n/* ⬇️⬇️ 把所有冗余的 CSS 逻辑也都搬到这里 ⬇️⬇️\n*/\n.page-container {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n}\n\n.content-feed {\n  flex: 1;\n  overflow-y: auto;\n  /* 注意：我们把 content-feed 的 padding 移除了，\n    让每个页面自己决定自己的 padding\n  */\n}\n\n.drawer-scroll-view {\n  height: 100%;\n}\n</style>","import Component from 'C:/Users/ffx/OneDrive/Desktop/项目源码/xuedong-uniapp/components/GlobalLayout/GlobalLayout.vue'\nwx.createComponent(Component)"],"names":["useDrawerStore","ref","watch","onMounted"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA,UAAM,cAAcA,cAAc,eAAA;AAClC,UAAM,gBAAgBC,cAAAA,IAAI,IAAI;AAC9B,UAAM,iBAAiBA,cAAAA,IAAI,IAAI;AAI/BC,kBAAK,MAAC,MAAM,YAAY,YAAY,CAAC,WAAW;AAC9C,UAAI,cAAc,OAAO;AACvB,iBAAS,cAAc,MAAM,KAAM,IAAG,cAAc,MAAM;MAC3D;AAAA,IACH,CAAC;AAEDA,kBAAK,MAAC,MAAM,YAAY,aAAa,CAAC,WAAW;AAC/C,UAAI,eAAe,OAAO;AACxB,iBAAS,eAAe,MAAM,KAAM,IAAG,eAAe,MAAM;MAC7D;AAAA,IACH,CAAC;AAEDC,kBAAAA,UAAU,MAAM;;AACd,UAAI,YAAY,YAAY;AAC1B,4BAAc,UAAd,mBAAqB;AAAA,MACtB;AACD,UAAI,YAAY,aAAa;AAC3B,6BAAe,UAAf,mBAAsB;AAAA,MACvB;AAAA,IACH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5DD,GAAG,gBAAgB,SAAS;"}