{"version":3,"file":"chat.js","sources":["pages/chat/chat.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2hhdC9jaGF0LnZ1ZQ"],"sourcesContent":["<template>\n  <GlobalLayout title=\"学习\">\n    <view class=\"page-container\" @touchmove.stop.prevent=\"() => {}\">\n      <image class=\"bg-image\" src=\"/static/images/yu.jpg\" mode=\"aspectFill\"></image>\n\n      <view class=\"content-layer\">\n\n        <view class=\"header-section\">\n          <view class=\"avatar-box\">\n            <view class=\"avatar-circle\">\n              <image src=\"/static/images/yu.jpg\" mode=\"aspectFit\" class=\"avatar-img\"></image>\n            </view>\n            <uni-badge class=\"notification-badge\" text=\"2\" type=\"error\" absolute=\"rightTop\" :offset=\"[-5, -5]\"></uni-badge>\n          </view>\n        </view>\n\n        <view class=\"center-section\">\n          <view class=\"check-in-card\" @click=\"onCheckInClick\">\n            <view class=\"icon-area\">\n              <uni-icons :type=\"signStore.isSigned ? 'checkbox-filled' : 'calendar-filled'\" size=\"32\" color=\"#333\"></uni-icons>\n            </view>\n            \n            <view class=\"text-area\">\n               <text class=\"card-title\" v-if=\"!signStore.isSigned\">签到</text>\n               <text class=\"card-title signed-text\" v-else>已签到 <text class=\"days-highlight\">{{ signStore.signDays }}</text> 天</text>\n            </view>\n\n            <text class=\"card-date\">{{ signStore.formattedDate }}</text>\n          </view>\n        </view>\n\n        <view class=\"stats-section\">\n          <view class=\"stat-card\">\n            <view class=\"stat-label\" @click=\"learnCi\">Learn</view>\n            <view class=\"stat-value review-color\">{{ learned }}</view>\n          </view>\n          <view class=\"stat-card\">\n            <view class=\"stat-label\" @click=\"reviewCi\">review</view>\n            <view class=\"stat-value review-color\">{{ reviewed }}</view>\n          </view>\n        </view>\n\n      </view>\n    </view>\n  </GlobalLayout>\n</template>\n\n<script setup>\n  import { ref } from 'vue';\n  import { useTabDrawerCloser } from '@/composables/useTabDrawerCloser.js';\n  // 引入刚才创建的 Pinia Store\n  import { useSignStore } from '@/stores/signStore.js';\n\n  useTabDrawerCloser();\n\n  // 初始化 Store\n  const signStore = useSignStore();\n\n  let learned = ref(1); \n  let reviewed = ref(1);\n\n  // 点击签到逻辑\n  const onCheckInClick = () => {\n    // 调用 Store 的方法\n    const success = signStore.handleCheckIn();\n    \n    if (success) {\n      uni.showToast({ title: '签到成功', icon: 'success' });\n    } else {\n      uni.showToast({ title: '今日已签到啦~', icon: 'none' });\n    }\n  };\n\n  const learnCi = () => {\n    setTimeout(() => {\n      uni.navigateTo({ url: '/pages-chat/learn/learn' });\n    }, 500);\n  };\n\n  const reviewCi = () => {\n    setTimeout(() => {\n      uni.navigateTo({ url: '/pages-chat/review/review' });\n    }, 500);\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n  .page-container {\n    width: 100vw;\n    height: 100vh;\n    position: relative;\n    overflow: hidden;\n  }\n\n  .bg-image {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 1;\n  }\n\n  .content-layer {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 2;\n    display: flex;\n    flex-direction: column;\n    /* 关键：让头部、中间、底部均匀分布，确保底部肯定在最下面 */\n    justify-content: space-between; \n    padding: 0 40rpx;\n    box-sizing: border-box;\n    /* 底部安全区，防止被 iPhone 横条遮挡 */\n    padding-bottom: calc(40rpx + env(safe-area-inset-bottom)); \n  }\n\n  /* 头部区域 */\n  .header-section {\n    /* 调整这里的值可以让圆标更往下 */\n    margin-top: 100rpx; \n    display: flex;\n    flex-shrink: 0; /* 防止被挤压 */\n  }\n\n  .avatar-box {\n    position: relative;\n    width: 80rpx;\n    height: 80rpx;\n  }\n\n  .avatar-circle {\n    width: 100%;\n    height: 100%;\n    background-color: rgba(255, 255, 255, 0.8);\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    overflow: hidden;\n  }\n\n  .avatar-img {\n    width: 60%;\n    height: 60%;\n  }\n\n  /* 中间区域 */\n  .center-section {\n    flex: 1; /* 占据所有剩余空间 */\n    display: flex;\n    align-items: center; /* 垂直居中 */\n    justify-content: center; /* 水平居中 */\n  }\n\n  .check-in-card {\n    width: 280rpx;\n    height: 280rpx;\n    background-color: rgba(255, 255, 255, 0.65);\n    backdrop-filter: blur(10px);\n    border-radius: 40rpx;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    box-shadow: 0 10rpx 30rpx rgba(0, 0, 0, 0.05);\n    transition: transform 0.1s;\n  }\n  \n  .check-in-card:active {\n    transform: scale(0.98);\n  }\n\n  .icon-area {\n    margin-bottom: 10rpx;\n  }\n\n  .card-title {\n    font-size: 32rpx;\n    color: #333;\n    font-weight: 600;\n    margin-bottom: 8rpx;\n  }\n  \n  .signed-text {\n    font-size: 28rpx;\n  }\n  \n  .days-highlight {\n    color: #ff8c00;\n    margin: 0 4rpx;\n    font-size: 34rpx;\n  }\n\n  .card-date {\n    font-size: 24rpx;\n    color: #555;\n  }\n\n  /* 底部统计区域 */\n  .stats-section {\n    display: flex;\n    justify-content: space-between;\n    flex-shrink: 0; /* 防止被挤压 */\n    /* 不需要 margin-bottom 了，由 content-layer 的 padding-bottom 控制 */\n  }\n\n  .stat-card {\n    width: 48%;\n    height: 160rpx;\n    background-color: rgba(255, 255, 255, 0.5);\n    border-radius: 24rpx;\n    padding: 30rpx;\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n  }\n\n  .stat-label {\n    font-size: 30rpx;\n    font-weight: 600;\n    color: #222;\n  }\n\n  .stat-value {\n    font-size: 40rpx;\n    font-weight: bold;\n    color: #ff8c00;\n  }\n</style>","import MiniProgramPage from 'C:/Users/ffx/OneDrive/Desktop/项目源码/xuedong-uniapp/pages/chat/chat.vue'\nwx.createPage(MiniProgramPage)"],"names":["useTabDrawerCloser","useSignStore","ref","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;AAqDEA,mCAAAA;AAGA,UAAM,YAAYC,iBAAAA;AAElB,QAAI,UAAUC,kBAAI,CAAC;AACnB,QAAI,WAAWA,kBAAI,CAAC;AAGpB,UAAM,iBAAiB,MAAM;AAE3B,YAAM,UAAU,UAAU;AAE1B,UAAI,SAAS;AACXC,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAS,CAAE;AAAA,MACtD,OAAW;AACLA,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,OAAM,CAAE;AAAA,MACjD;AAAA,IACL;AAEE,UAAM,UAAU,MAAM;AACpB,iBAAW,MAAM;AACfA,sBAAAA,MAAI,WAAW,EAAE,KAAK,0BAA2B,CAAA;AAAA,MAClD,GAAE,GAAG;AAAA,IACV;AAEE,UAAM,WAAW,MAAM;AACrB,iBAAW,MAAM;AACfA,sBAAAA,MAAI,WAAW,EAAE,KAAK,4BAA6B,CAAA;AAAA,MACpD,GAAE,GAAG;AAAA,IACV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClFA,GAAG,WAAW,eAAe;"}